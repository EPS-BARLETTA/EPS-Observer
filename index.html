<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
  <meta charset="utf-8" />
  <title>EPS Observer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fichiers CSS -->
  <link rel="stylesheet" href="./style.css">

  <!-- Librairie PDF locale -->
  <script src="./lib/pdfmake.min.js"></script>
  <script src="./lib/vfs_fonts.js"></script>
</head>

<body>
<div class="app">

  <!-- PAGE 1 : COVER -->
  <section id="page-cover" class="page visible">
    <div class="hero">
      <h1>EPS Observer</h1>
      <p>Observations â€” APSA â€” CA â€” Niveaux</p>
      <button id="btnStart" class="btn btn-green big">Commencer</button>
    </div>
  </section>

  <!-- PAGE 2 : ACTIVITÃ‰ -->
  <section id="page-activity" class="page">
    <header class="topbar">
      <button id="backToCover" class="btn btn-light">â† Accueil</button>
      <h2>Choisir l'activitÃ©</h2>
    </header>

    <div class="bloc">
      <h3>Niveau</h3>
      <div id="levelButtons"></div>
    </div>

    <div class="bloc">
      <h3>Champ dâ€™apprentissage (CA1 â†’ CA5)</h3>
      <div id="champList"></div>
    </div>

    <div class="bloc">
      <h3>APSA</h3>
      <div id="apsaList"></div>
      <div class="row">
        <input id="addApsaInput" placeholder="Ajouter une APSA">
        <button id="addApsaBtn" class="btn btn-blue">Ajouter</button>
      </div>
    </div>

    <div class="footer-nav">
      <button id="btnToObservables" class="btn btn-green big">Configurer les observables</button>
    </div>
  </section>

  <!-- PAGE 3 : OBSERVABLES -->
  <section id="page-observables" class="page">
    <header class="topbar">
      <button id="backToActivity" class="btn btn-light">â† ActivitÃ©</button>
      <h2>Observables</h2>
    </header>

    <p id="obsApsaLabel" class="subtitle"></p>

    <div class="bloc bloc-config">
      <h3>RÃ©glages globaux d'affichage</h3>
      <div class="row wrap">
        <button id="togglePlusMinusGlobal" class="toggle-chip">+ / â€“</button>
        <button id="toggleLevelsGlobal" class="toggle-chip">Niveaux (1â€“4)</button>
        <button id="toggleFreeTextGlobal" class="toggle-chip">Commentaire libre</button>
      </div>
      <button id="applyGlobalToAll" class="btn btn-amber small">
        Appliquer ces rÃ©glages Ã  tous les observables
      </button>
    </div>

    <div id="observableList"></div>

    <div class="bloc">
      <div class="row">
        <input id="addObservableInput" placeholder="Ajouter un observable">
        <button id="addObservableBtn" class="btn btn-blue">Ajouter</button>
      </div>
    </div>

    <div class="footer-nav">
      <button id="btnToRole" class="btn btn-green big">DÃ©marrer lâ€™observation</button>
    </div>
  </section>

  <!-- PAGE 4 : CHOIX DU RÃ”LE -->
  <section id="page-role" class="page">
    <header class="topbar">
      <button id="backToObservables" class="btn btn-light">â† Observables</button>
      <h2>Quel est votre rÃ´le aujourd'hui ?</h2>
    </header>

    <div class="role-choice">
      <button id="roleObserver" class="btn btn-blue role-btn">ğŸŸ¢ Je suis observateur</button>
      <button id="roleObserved" class="btn btn-amber role-btn">ğŸ”µ Je suis observÃ©</button>
    </div>

    <div id="roleForm" class="bloc hidden">
      <h3 id="roleTitle"></h3>

      <div class="bloc inner green">
        <label>Mon prÃ©nom :</label>
        <input id="roleSelfInput" type="text">
      </div>

      <div class="bloc inner amber">
        <label id="roleTargetLabel"></label>
        <div id="roleTargetList" class="chips"></div>
        <input id="roleTargetInput">
      </div>

      <div class="footer-nav">
        <button id="btnStartSession" class="btn btn-green big">Commencer la session</button>
      </div>
    </div>
  </section>

  <!-- PAGE 5 : OBSERVATION -->
  <section id="page-observation" class="page">
    <header class="topbar">
      <button id="backToRole" class="btn btn-light">â† RÃ´le</button>
      <h2 id="sessionHeader"></h2>
    </header>

    <div class="bloc">
      <button id="btnAddTarget" class="btn btn-blue">+ Ajouter une personne</button>
    </div>

    <div id="targetTabs"></div>
    <div id="observationArea"></div>

    <div class="row footer-nav">
      <button id="btnToBilan" class="btn btn-green">ğŸ“„ Voir le bilan</button>
      <button id="btnEndSession" class="btn btn-red">Terminer</button>
    </div>
  </section>

  <!-- PAGE 6 : BILAN -->
  <section id="page-bilan" class="page">
    <header class="topbar">
      <button id="backToSession" class="btn btn-light">â† Retour Ã  la session</button>
      <h2>Bilan et PDF</h2>
    </header>

    <div id="bilanContent"></div>

    <div class="footer-nav">
      <button id="btnExportPDF" class="btn btn-green-dark big">ğŸ“„ Exporter le PDF</button>
    </div>
  </section>

</div>

<!-- FICHIER JS PRINCIPAL -->
<script src="./app.js"></script>
</body>
</html>
