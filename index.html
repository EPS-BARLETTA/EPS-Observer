<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
  <meta charset="utf-8" />
  <title>EPS Observer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fichiers CSS -->
  <link rel="stylesheet" href="./style.css">

  <!-- Librairie PDF locale -->
  <script src="./lib/pdfmake.min.js"></script>
  <script src="./lib/vfs_fonts.js"></script>
</head>

<body>
<div class="app">

  <!-- PAGE 1 : COVER -->
  <section id="page-cover" class="page visible">
    <div class="hero">
      <h1>EPS Observer</h1>
      <p>Observations â€” APSA â€” CA â€” Niveaux</p>
      <button id="btnStart" class="btn btn-green">Commencer</button>
    </div>
  </section>

  <!-- PAGE 2 : ACTIVITÃ‰ -->
  <section id="page-activity" class="page">
    <h2>Choisir l'activitÃ©</h2>

    <div class="bloc">
      <h3>Niveau</h3>
      <div id="levelButtons"></div>
    </div>

    <div class="bloc">
      <h3>Champ dâ€™apprentissage (CA1 â†’ CA5)</h3>
      <div id="champList"></div>
    </div>

    <div class="bloc">
      <h3>APSA</h3>
      <div id="apsaList"></div>
      <div class="row">
        <input id="addApsaInput" placeholder="Ajouter une APSA">
        <button id="addApsaBtn" class="btn btn-blue">Ajouter</button>
      </div>
    </div>

    <button id="btnToObservables" class="btn btn-green">Configurer les observables</button>
  </section>

  <!-- PAGE 3 : OBSERVABLES -->
  <section id="page-observables" class="page">
    <h2>Observables</h2>
    <p id="obsApsaLabel"></p>

    <!-- RÃ©glages globaux dâ€™affichage -->
    <div class="bloc bloc-compact">
      <h3>Affichage par dÃ©faut des observables</h3>
      <div class="row toggles-row">
        <label class="toggle-chip">
          <input type="checkbox" id="globalShowLevels_config" checked>
          <span>Niveaux 1â€“4</span>
        </label>
        <label class="toggle-chip">
          <input type="checkbox" id="globalShowPlusMinus_config" checked>
          <span>Boutons + / âˆ’</span>
        </label>
        <label class="toggle-chip">
          <input type="checkbox" id="globalShowComment_config" checked>
          <span>Commentaire</span>
        </label>
      </div>
      <p class="hint-small">Ces rÃ©glages sont appliquÃ©s Ã  tous les observables. Vous pourrez les modifier ensuite, observable par observable.</p>
    </div>

    <div id="observableList"></div>

    <div class="row">
      <input id="addObservableInput" placeholder="Ajouter un observable">
      <button id="addObservableBtn" class="btn btn-blue">Ajouter</button>
    </div>

    <button id="btnToRole" class="btn btn-green">DÃ©marrer lâ€™observation</button>
  </section>

  <!-- PAGE 4 : CHOIX DU RÃ”LE -->
  <section id="page-role" class="page">
    <h2>Quel est votre rÃ´le ?</h2>

    <button id="roleObserver" class="btn btn-blue big">ðŸŸ¢ Je suis observateur</button>
    <button id="roleObserved" class="btn btn-amber big">ðŸ”µ Je suis observÃ©</button>

    <div id="roleForm" class="hidden">
      <h3 id="roleTitle"></h3>

      <div class="bloc">
        <label>Mon prÃ©nom :</label>
        <input id="roleSelfInput" type="text" placeholder="Votre prÃ©nom">
      </div>

      <div class="bloc">
        <label id="roleTargetLabel"></label>
        <div id="roleTargetList" class="chips"></div>
        <input id="roleTargetInput" placeholder="Ajouter un nom">
      </div>

      <button id="btnStartSession" class="btn btn-green">Commencer la session</button>
    </div>
  </section>

  <!-- PAGE 5 : OBSERVATION -->
  <section id="page-observation" class="page">
    <h2 id="sessionHeader"></h2>

    <!-- RÃ©glages globaux aussi accessibles ici -->
    <div class="bloc bloc-compact">
      <h3>Affichage global</h3>
      <div class="row toggles-row">
        <label class="toggle-chip">
          <input type="checkbox" id="globalShowLevels_obs" checked>
          <span>Niveaux 1â€“4</span>
        </label>
        <label class="toggle-chip">
          <input type="checkbox" id="globalShowPlusMinus_obs" checked>
          <span>Boutons + / âˆ’</span>
        </label>
        <label class="toggle-chip">
          <input type="checkbox" id="globalShowComment_obs" checked>
          <span>Commentaire</span>
        </label>
      </div>
      <p class="hint-small">Vous pouvez toujours ajuster chaque observable individuellement.</p>
    </div>

    <div class="bloc">
      <button id="btnAddTarget" class="btn btn-blue">+ Ajouter une personne</button>
    </div>

    <div id="targetTabs"></div>
    <div id="observationArea"></div>

    <div class="row row-footer">
      <button id="btnToBilan" class="btn btn-green">ðŸ“„ Voir le bilan</button>
      <button id="btnEndSession" class="btn btn-red">Terminer</button>
    </div>
  </section>

  <!-- PAGE 6 : BILAN -->
  <section id="page-bilan" class="page">
    <h2>Bilan et PDF</h2>

    <div id="bilanContent"></div>

    <div class="row row-footer">
      <button id="btnExportPDF" class="btn btn-green-dark">ðŸ“„ Exporter le PDF</button>
      <button id="btnBackToSession" class="btn btn-blue">Retour Ã  la session</button>
    </div>
  </section>

</div>

<!-- FICHIER JS PRINCIPAL -->
<script src="./app.js"></script>
</body>
</html>
